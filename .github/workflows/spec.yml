name: Spec & Contracts

on:
  push:
    branches: [ "**" ]
  pull_request:

jobs:
  spec:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install deps
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: Generate Spec Book (MD)
        run: |
          mkdir -p dist
          # сюда помести команду/скрипт, который создаёт Markdown-книгу:
          # пример: python scripts/spec/make_book_md.py --out docs/spec/book.md
          test -f docs/spec/book.md || echo "# Spec Book\n\n_To be filled._" > docs/spec/book.md

      - name: Create PDF from Spec Book
        run: |
          npm i -g md-to-pdf@5
          # md-to-pdf v5: <input> <output>
          md-to-pdf docs/spec/book.md dist/spec-book.pdf
